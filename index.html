<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ADDM.cpp: ADDM.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ADDM.cpp
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">ADDM.cpp </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> C++ implementation of the aDDM-Toolbox.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Getting Started</h1>
<p>The <a class="el" href="classaDDM.html" title="Implementation of the attentional Drift Diffusion Model (aDDM).">aDDM</a> Toolbox library for C++ can be cloned on the user's machine or run in a Docker container. <b>We recommend using the Docker image unless you are familiar with installing and compiling C++ packages</b>. For requirements for a local build of the ADDM.cpp, see the Local Installation section. For instructions on the Docker installation, continue to the Docker Image section.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Docker Image</h1>
<p>To pull a Docker image with ADDM.cpp installed, follow the steps below:</p>
<ul>
<li>Install <a href="https://www.docker.com/products/docker-desktop/">Docker Desktop</a>.</li>
<li>Start Docker Desktop.</li>
<li>You can use the Docker image either through Docker Desktop and selecting <b>run</b> on <code>rnlcaltech/addm-toolbox:<a class="el" href="addm_8cpp.html">addm.cpp</a></code> in the list of your local Docker images or using a CLI with the following command:</li>
</ul>
<div class="fragment"><div class="line">$ docker run -it --rm \</div>
<div class="line">    -v $(pwd):/home \</div>
<div class="line">    rnlcaltech/addm-toolbox:addm.cpp</div>
</div><!-- fragment --><p>This command will mount <code>/home</code> in the Docker container to your current directory. Any files you want to keep after exiting the container should be saved there.</p>
<ul>
<li>If you're not on an architecture that is currently supported by the images on Docker Hub you can build the image appropriate for your system using the <a href="https://github.com/aDDM-Toolbox/ADDM.cpp/blob/main/Dockerfile">Dockerfile</a> provided in this repo. To do so navigate to the directory you cloned this repo to and run:</li>
</ul>
<div class="fragment"><div class="line">$ docker build -t {USER_NAME}/addm-toolbox:addm.cpp -f ./Dockerfile .</div>
</div><!-- fragment --><p>You can exit the container with Ctrl+D or the command <code>exit</code>. Note that this will permanently delete any changes or new files you created in your container unless saved in <code>/home</code>.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Local Installation</h1>
<p>Skip this if you are using the Docker image as recommended above.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
Requirements</h2>
<p>The standard build of ADDM.cpp assumes Ubuntu Linux 22.04. This library requires g++ 11.3.0, as well as several third-party C++ packages:</p>
<ul>
<li><a href="https://github.com/bshoshany/thread-pool">BS::thread_pool</a></li>
<li><a href="https://github.com/nlohmann/json">JSON for Modern C++</a></li>
<li><a href="https://www.boost.org/doc/libs/?view=category_math">Boost Math/Statistical Distributions</a></li>
<li><a href="https://github.com/catchorg/Catch2">Catch2</a></li>
</ul>
<p>These dependencies can be installed using the following commands. Note that they assume the path <code>/usr/include/c++/11/</code> and <code>apt-get</code> exist on your system.</p>
<div class="fragment"><div class="line">$ wget -O /usr/include/c++/11/BS_thread_pool.hpp https://raw.githubusercontent.com/bshoshany/thread-pool/master/include/BS_thread_pool.hpp</div>
<div class="line">$ mkdir -p /usr/include/c++/11/nlohmann</div>
<div class="line">$ wget -O /usr/include/c++/11/nlohmann/json.hpp https://raw.githubusercontent.com/nlohmann/json/develop/single_include/nlohmann/json.hpp</div>
<div class="line">$ apt-get install libboost-math-dev libboost-math1.74-dev catch2</div>
</div><!-- fragment --><p>Be sure to clone the <a href="https://github.com/aDDM-Toolbox/ADDM.cpp">ADDM.cpp</a> library from Github if you haven't done so already.</p>
<p><em>Note that the installation directory /usr/include/c++/11 may be modified to support newer versions of C++. In the event of a <b>Permission Denied</b> error, precede the above commands with <b>sudo</b>.</em></p>
<h2><a class="anchor" id="autotoc_md5"></a>
Installation</h2>
<p>The ADDM.cpp library can then be built and installed in one step:</p>
<div class="fragment"><div class="line">$ make install</div>
</div><!-- fragment --><p><em>In the event of a <b>Permission Denied</b> error, precede the above command with <b>sudo</b>.</em></p>
<h1><a class="anchor" id="autotoc_md6"></a>
Basic Usage</h1>
<p>Both of the above methods will install the <code>libaddm.so</code> shared library as well as the corresponding header files. Although there are multiple header files corresponding to the <a class="el" href="classaDDM.html" title="Implementation of the attentional Drift Diffusion Model (aDDM).">aDDM</a> and <a class="el" href="classDDM.html" title="Implementation of the Drift Diffusion Model (DDM).">DDM</a> programs, simply adding <code>#include &lt;addm/cpp_toolbox.h&gt;</code> to a C++ program will include all necessary headers. A simple usage example is described below.</p>
<p>To use the C++ toolbox, you need to create programs (files with <code>.cpp</code> extensions), compile them (e.g. using <code>g++</code>) and then run them. If you have installed the toolbox locally, you can create your programs or the ones described in this tutorual in any text editor you have on your system. Alternatively, if you're using the Docker image, as advised above, you can use <code>vim</code> as the editor to write or paste the code from the tutorial.</p>
<p>So e.g., after starting a container using the <code>docker run ...</code> command above, you will be in a shell session that has the precompiled aDDM-toolbox. From the command line you can run</p>
<div class="fragment"><div class="line">root âžœ ~/ADDM.cpp (main) $ vim main.cpp</div>
</div><!-- fragment --><p> to create a new file names <code>main.cpp</code>, hit <code>i</code> to copy and paste the code from below, and save it using <code>:x</code>.</p>
<p><code>main.cpp</code>: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;addm/cpp_toolbox.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="addm__mle_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a>() {</div>
<div class="line">    <a class="code hl_class" href="classaDDM.html">aDDM</a> addm = <a class="code hl_class" href="classaDDM.html">aDDM</a>(0.005, 0.07, 0.5);</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;d: &quot;</span> &lt;&lt; addm.d &lt;&lt; std::endl; </div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;sigma: &quot;</span> &lt;&lt; addm.sigma &lt;&lt; std::endl; </div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;theta: &quot;</span> &lt;&lt; addm.theta &lt;&lt; std::endl; </div>
<div class="line">}</div>
<div class="ttc" id="aaddm__mle_8cpp_html_ae66f6b31b5ad750f1fe042a706a4e3d4"><div class="ttname"><a href="addm__mle_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a></div><div class="ttdeci">int main()</div><div class="ttdef"><b>Definition</b> addm_mle.cpp:16</div></div>
<div class="ttc" id="aclassaDDM_html"><div class="ttname"><a href="classaDDM.html">aDDM</a></div><div class="ttdoc">Implementation of the attentional Drift Diffusion Model (aDDM).</div><div class="ttdef"><b>Definition</b> addm.h:128</div></div>
</div><!-- fragment --><p>You can confirm you created the <code>main.cpp</code> program by running</p>
<div class="fragment"><div class="line">root âžœ ~/ADDM.cpp (main) $ ls</div>
</div><!-- fragment --><p>The next step is to compile this new program. When compiling any code using the toolbox, include the <code>-laddm</code> flag to link with the installed shared object library.</p>
<div class="fragment"><div class="line">$ g++ -o main main.cpp -laddm</div>
<div class="line">$ ./main</div>
</div><!-- fragment --><p>Expected output:</p>
<div class="fragment"><div class="line">d: 0.005</div>
<div class="line">sigma: 0.07</div>
<div class="line">theta: 0.5</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md7"></a>
Tutorial</h1>
<p>In the <a href="data/">data</a> directory, we have included two test files to demonstrate how to use the toolbox. <a href="data/expdata.csv">expdata.csv</a> contains sample experimental data and <a href="data/fixations.csv">fixations.csv</a> contains the corresponding fixation data. A description of how to fit models corresponding to these subjects is located in <a href="sample/tutorial.cpp">tutorial.cpp</a>. An executable version of this script can be built using the <code>make run</code> target. The contents of the tutorial are listed below, but can be found <b>verbatim</b> in <a href="sample/tutorial.cpp">tutorial.cpp</a>.</p>
<p><code><a class="el" href="tutorial_8cpp.html">sample/tutorial.cpp</a></code> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;addm/cpp_toolbox.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="addm__mle_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a>() {</div>
<div class="line">    <span class="comment">// Load trial and fixation data</span></div>
<div class="line">    std::map&lt;int, std::vector&lt;aDDMTrial&gt;&gt; data = <a class="code hl_function" href="util_8h.html#a78fc1c7aadc9bd3f08e29b796632b49b">loadDataFromCSV</a>(<span class="stringliteral">&quot;data/expdata.csv&quot;</span>, <span class="stringliteral">&quot;data/fixations.csv&quot;</span>);</div>
<div class="line">    <span class="comment">// Iterate through each SubjectID and its corresponding vector of trials. </span></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; [subjectID, trials] : data) {</div>
<div class="line">        std::cout &lt;&lt; subjectID &lt;&lt; <span class="stringliteral">&quot;: &quot;</span>; </div>
<div class="line">        <span class="comment">// Compute the most optimal parameters to generate </span></div>
<div class="line">        <a class="code hl_struct" href="structMLEinfo.html">MLEinfo</a> info = <a class="code hl_function" href="classaDDM.html#acc9951f76f33388905921ef38a76c89b">aDDM::fitModelMLE</a>(trials, {0.001, 0.002, 0.003}, {0.0875, 0.09, 0.0925}, {0.1, 0.3, 0.5}, {0}, <span class="stringliteral">&quot;thread&quot;</span>);</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;d: &quot;</span> &lt;&lt; info.<a class="code hl_variable" href="structMLEinfo.html#a054f10abde01843cc1db0b07135edb0e">optimal</a>.d &lt;&lt; <span class="stringliteral">&quot; &quot;</span>; </div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;sigma: &quot;</span> &lt;&lt; info.<a class="code hl_variable" href="structMLEinfo.html#a054f10abde01843cc1db0b07135edb0e">optimal</a>.sigma &lt;&lt; <span class="stringliteral">&quot; &quot;</span>; </div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;theta: &quot;</span> &lt;&lt; info.<a class="code hl_variable" href="structMLEinfo.html#a054f10abde01843cc1db0b07135edb0e">optimal</a>.theta &lt;&lt; std::endl;</div>
<div class="line">    }</div>
<div class="line">}  </div>
<div class="ttc" id="aclassaDDM_html_acc9951f76f33388905921ef38a76c89b"><div class="ttname"><a href="classaDDM.html#acc9951f76f33388905921ef38a76c89b">aDDM::fitModelMLE</a></div><div class="ttdeci">static MLEinfo&lt; aDDM &gt; fitModelMLE(vector&lt; aDDMTrial &gt; trials, vector&lt; float &gt; rangeD, vector&lt; float &gt; rangeSigma, vector&lt; float &gt; rangeTheta, vector&lt; float &gt; rangeK={0}, string computeMethod=&quot;basic&quot;, bool normalizePosteriors=false, float barrier=1, unsigned int nonDecisionTime=0, int timeStep=10, float approxStateStep=0.1, vector&lt; float &gt; bias={0}, vector&lt; float &gt; decay={0}, bool useAlternative=false, map&lt; string, vector&lt; float &gt; &gt;rangeOptional={})</div><div class="ttdoc">Complete a grid-search based Maximum Likelihood Estimation of all possible parameter combinations (d,...</div><div class="ttdef"><b>Definition</b> addm.cpp:673</div></div>
<div class="ttc" id="astructMLEinfo_html"><div class="ttname"><a href="structMLEinfo.html">MLEinfo</a></div><div class="ttdoc">Information returned by MLE computations containing the most optimal model and NLLs/marginalized post...</div><div class="ttdef"><b>Definition</b> mle_info.h:14</div></div>
<div class="ttc" id="astructMLEinfo_html_a054f10abde01843cc1db0b07135edb0e"><div class="ttname"><a href="structMLEinfo.html#a054f10abde01843cc1db0b07135edb0e">MLEinfo::optimal</a></div><div class="ttdeci">T optimal</div><div class="ttdef"><b>Definition</b> mle_info.h:15</div></div>
<div class="ttc" id="autil_8h_html_a78fc1c7aadc9bd3f08e29b796632b49b"><div class="ttname"><a href="util_8h.html#a78fc1c7aadc9bd3f08e29b796632b49b">loadDataFromCSV</a></div><div class="ttdeci">std::map&lt; int, std::vector&lt; aDDMTrial &gt; &gt; loadDataFromCSV(std::string expDataFilename, std::string fixDataFilename)</div><div class="ttdoc">Load experimental data from two CSV files: an experimental data file and a fixations file....</div><div class="ttdef"><b>Definition</b> util.cpp:24</div></div>
</div><!-- fragment --><p>Let's break this down piece by piece:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;addm/cpp_toolbox.h&gt;</span></div>
</div><!-- fragment --><p>This tells the C++ pre-processor to find the <code>addm</code> library and the main header file <code><a class="el" href="cpp__toolbox_8h.html">cpp_toolbox.h</a></code>. The main header file includes all sub-headers for the <code><a class="el" href="classDDM.html" title="Implementation of the Drift Diffusion Model (DDM).">DDM</a></code> and <code><a class="el" href="classaDDM.html" title="Implementation of the attentional Drift Diffusion Model (aDDM).">aDDM</a></code> classes and utility methods, so there is no need to include any other files. If you haven't already, run <code>make install</code> to install the <code>addm</code> library on your machine.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
</div><!-- fragment --><p>This tells the pre-processor to compile with the <code>&lt;iostream&gt;</code> library, which provides functionality for printing to the console.</p>
<div class="fragment"><div class="line"><span class="comment">// Load trial and fixation data</span></div>
<div class="line">std::map&lt;int, std::vector&lt;aDDMTrial&gt;&gt; data = <a class="code hl_function" href="util_8h.html#a78fc1c7aadc9bd3f08e29b796632b49b">loadDataFromCSV</a>(<span class="stringliteral">&quot;data/expdata.csv&quot;</span>, <span class="stringliteral">&quot;data/fixations.csv&quot;</span>);</div>
</div><!-- fragment --><p>This uses the <code>loadDataFromCSV</code> function included in <code><a class="el" href="util_8h.html">util.h</a></code> to load the experimental data and fixation data from CSV files. Both files need to be structured in a specific format to be properly loaded. These formats are described below, with sample experimental data in <code>data/expdata.csv</code> and fixation data in <code>data/fixations.csv</code>.</p>
<p><b>Experimental Data</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">parcode   </th><th class="markdownTableHeadCenter">trial   </th><th class="markdownTableHeadCenter">rt   </th><th class="markdownTableHeadCenter">choice   </th><th class="markdownTableHeadCenter">valueLeft   </th><th class="markdownTableHeadCenter">valueRight    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">0   </td><td class="markdownTableBodyCenter">0   </td><td class="markdownTableBodyCenter">1962   </td><td class="markdownTableBodyCenter">-1   </td><td class="markdownTableBodyCenter">15   </td><td class="markdownTableBodyCenter">0    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">0   </td><td class="markdownTableBodyCenter">1   </td><td class="markdownTableBodyCenter">873   </td><td class="markdownTableBodyCenter">1   </td><td class="markdownTableBodyCenter">-15   </td><td class="markdownTableBodyCenter">5    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">0   </td><td class="markdownTableBodyCenter">2   </td><td class="markdownTableBodyCenter">1345   </td><td class="markdownTableBodyCenter">1   </td><td class="markdownTableBodyCenter">10   </td><td class="markdownTableBodyCenter">-5   </td></tr>
</table>
<p><b>Fixation Data</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">parcode   </th><th class="markdownTableHeadCenter">trial   </th><th class="markdownTableHeadCenter">fixItem   </th><th class="markdownTableHeadCenter">fixTime    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">0   </td><td class="markdownTableBodyCenter">0   </td><td class="markdownTableBodyCenter">3   </td><td class="markdownTableBodyCenter">176    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">0   </td><td class="markdownTableBodyCenter">0   </td><td class="markdownTableBodyCenter">0   </td><td class="markdownTableBodyCenter">42    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">0   </td><td class="markdownTableBodyCenter">0   </td><td class="markdownTableBodyCenter">1   </td><td class="markdownTableBodyCenter">188   </td></tr>
</table>
<p>Note that data can also be loaded from a single CSV as well. To do this, use the <code>loadDataFromSingleCSV</code> function. This format is described below:</p>
<p><b>Single CSV</b></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">trial   </th><th class="markdownTableHeadCenter">choice   </th><th class="markdownTableHeadCenter">rt   </th><th class="markdownTableHeadCenter">valueLeft   </th><th class="markdownTableHeadCenter">valueRight   </th><th class="markdownTableHeadCenter">fixItem   </th><th class="markdownTableHeadCenter">fixTime    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">0   </td><td class="markdownTableBodyCenter">1   </td><td class="markdownTableBodyCenter">350   </td><td class="markdownTableBodyCenter">3   </td><td class="markdownTableBodyCenter">0   </td><td class="markdownTableBodyCenter">0   </td><td class="markdownTableBodyCenter">200    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">0   </td><td class="markdownTableBodyCenter">1   </td><td class="markdownTableBodyCenter">350   </td><td class="markdownTableBodyCenter">3   </td><td class="markdownTableBodyCenter">0   </td><td class="markdownTableBodyCenter">1   </td><td class="markdownTableBodyCenter">150    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">1   </td><td class="markdownTableBodyCenter">-1   </td><td class="markdownTableBodyCenter">400   </td><td class="markdownTableBodyCenter">4   </td><td class="markdownTableBodyCenter">5   </td><td class="markdownTableBodyCenter">0   </td><td class="markdownTableBodyCenter">300    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">1   </td><td class="markdownTableBodyCenter">-1   </td><td class="markdownTableBodyCenter">400   </td><td class="markdownTableBodyCenter">4   </td><td class="markdownTableBodyCenter">5   </td><td class="markdownTableBodyCenter">2   </td><td class="markdownTableBodyCenter">100   </td></tr>
</table>
<p>The <code>loadDataFromCSV</code> function returns a <code>std::map&lt;int, std::vector&lt;<a class="el" href="classaDDMTrial.html" title="Implementation of a single aDDMTrial object.">aDDMTrial</a>&gt;&gt;</code>. This is a mapping from subjectIDs to their corresponding list of trials. A single trial (choice, response time, fixations) is represented in each <code><a class="el" href="classaDDMTrial.html" title="Implementation of a single aDDMTrial object.">aDDMTrial</a></code> object.</p>
<div class="fragment"><div class="line"><span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; [subjectID, trials] : data) ...</div>
</div><!-- fragment --><p>Iterate through each individual subjectID and its list of aDDMTrials.</p>
<div class="fragment"><div class="line">std::cout &lt;&lt; subjectID &lt;&lt; <span class="stringliteral">&quot;: &quot;</span>; </div>
<div class="line"><span class="comment">// Compute the most optimal parameters to generate </span></div>
<div class="line"><a class="code hl_struct" href="structMLEinfo.html">MLEinfo</a> info = <a class="code hl_function" href="classaDDM.html#acc9951f76f33388905921ef38a76c89b">aDDM::fitModelMLE</a>(trials, {0.001, 0.002, 0.003}, {0.0875, 0.09, 0.0925}, {0.1, 0.3, 0.5}, {0}, <span class="stringliteral">&quot;thread&quot;</span>);</div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;d: &quot;</span> &lt;&lt; info.<a class="code hl_variable" href="structMLEinfo.html#a054f10abde01843cc1db0b07135edb0e">optimal</a>.d &lt;&lt; <span class="stringliteral">&quot; &quot;</span>; </div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;sigma: &quot;</span> &lt;&lt; info.<a class="code hl_variable" href="structMLEinfo.html#a054f10abde01843cc1db0b07135edb0e">optimal</a>.sigma &lt;&lt; <span class="stringliteral">&quot; &quot;</span>; </div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;theta: &quot;</span> &lt;&lt; info.<a class="code hl_variable" href="structMLEinfo.html#a054f10abde01843cc1db0b07135edb0e">optimal</a>.theta &lt;&lt; std::endl; </div>
</div><!-- fragment --><p>Perform model fitting via Maximum Likelihood Estimation (MLE) to find the optimal parameters for each subject. The arguments for this function are as follows:</p>
<ul>
<li><code>trials</code> - The list of trials for the given subjectID.</li>
<li><code>{0.001, 0.002, 0.003}</code> - Range to test for the drift rate (d).</li>
<li><code>{0.0875, 0.09, 0.0925}</code> - Range to test for noise (sigma).</li>
<li><code>{0.1, 0.3, 0.5}</code> - Range to test for the fixation discount (theta).</li>
<li><code>{0}</code> - Range to test for additive fixation factor (k). The default <a class="el" href="classaDDM.html" title="Implementation of the attentional Drift Diffusion Model (aDDM).">aDDM</a> model assumes no additive scalar for fixations.</li>
<li><code>"thread"</code> - indicates whether to use the standard or multithreaded implementation. Must be selected between <code>"basic"</code> and <code>"thread"</code>.</li>
</ul>
<p>When building the tutorial with <code>make run</code>, an executable will be created at <code>bin/tutorial</code>. Running this executable should print the model parameters for each subject. At first, it may seem like most subjects report similar parameters. This is to be expected given the small parameter space the grid search is testing; however, there should be a slight variance among parameters for some subjects. The expected output is described below:</p>
<div class="fragment"><div class="line">0: d: 0.001 sigma: 0.0925 theta: 0.1</div>
<div class="line">1: d: 0.001 sigma: 0.09 theta: 0.1</div>
<div class="line">2: d: 0.001 sigma: 0.0875 theta: 0.1</div>
<div class="line">3: d: 0.001 sigma: 0.09 theta: 0.1</div>
<div class="line">â‹®</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md8"></a>
Testing</h1>
<p>A set of basic correctnesss tests are located in the <a href="tests/">tests</a> directory. These tests may be updated as more features are (potentially) added. Most importantly, these tests check that (1) the toolbox can be installed without error and (2) the installed toolbox performs trial simulation, likelihood estimation, and MLE correctly. To run the tests:</p>
<div class="fragment"><div class="line">$ make test</div>
<div class="line">$ bin/addm_test</div>
</div><!-- fragment --><p>These tests are also configured to automatically run when pushed to GitHub. If you are contributing to the toolbox, be sure that your commit succesfully runs and passes the tests before attempting to merge.</p>
<h1><a class="anchor" id="autotoc_md9"></a>
Modifying the Toolbox</h1>
<p>Some users may want to modify this codebase for their own purposes. Below are some examples of what users may want to do and some tips on altering the code.</p>
<h2><a class="anchor" id="autotoc_md10"></a>
Alternative Optimization Algorithms</h2>
<p>For some use-cases, MLE may not be optimal for model fitting. So, some users may want to change how the model fitting algorithm identifies the optimal parameters. The portion of the <code>fitModelMLE</code> function in the <a class="el" href="classaDDM.html" title="Implementation of the attentional Drift Diffusion Model (aDDM).">aDDM</a> class where MLE is actually performed is highlighted in the <code><a class="el" href="addm_8cpp.html">addm.cpp</a></code> file, but is also described below.</p>
<div class="fragment"><div class="line"><span class="keywordtype">double</span> minNLL = __DBL_MAX__; </div>
<div class="line"><a class="code hl_class" href="classaDDM.html">aDDM</a> optimal = <a class="code hl_class" href="classaDDM.html">aDDM</a>(); </div>
<div class="line"><span class="keywordflow">for</span> (<a class="code hl_class" href="classaDDM.html">aDDM</a> addm : potentialModels) {</div>
<div class="line">    <a class="code hl_class" href="classProbabilityData.html">ProbabilityData</a> aux = NLLcomputer(addm);</div>
<div class="line">    <span class="keywordflow">if</span> (normalizePosteriors) {</div>
<div class="line">        allTrialLikelihoods.insert({addm, aux});</div>
<div class="line">        posteriors.insert({addm, 1 / numModels});</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        posteriors.insert({addm, aux.<a class="code hl_variable" href="classProbabilityData.html#ac82874e15b2365db4ce1320aa2097055">NLL</a>});</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (aux.<a class="code hl_variable" href="classProbabilityData.html#ac82874e15b2365db4ce1320aa2097055">NLL</a> &lt; minNLL) {</div>
<div class="line">        minNLL = aux.<a class="code hl_variable" href="classProbabilityData.html#ac82874e15b2365db4ce1320aa2097055">NLL</a>; </div>
<div class="line">        optimal = addm; </div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="aclassProbabilityData_html"><div class="ttname"><a href="classProbabilityData.html">ProbabilityData</a></div><div class="ttdoc">Information pertaining to the computation of likelihoods for a dataset of trials (either DDM or aDDM)...</div><div class="ttdef"><b>Definition</b> mle_info.h:29</div></div>
<div class="ttc" id="aclassProbabilityData_html_ac82874e15b2365db4ce1320aa2097055"><div class="ttname"><a href="classProbabilityData.html#ac82874e15b2365db4ce1320aa2097055">ProbabilityData::NLL</a></div><div class="ttdeci">double NLL</div><div class="ttdef"><b>Definition</b> mle_info.h:33</div></div>
</div><!-- fragment --><p>Key Variables:</p><ul>
<li><code>potentialModels</code>: Vector of all possible <a class="el" href="classaDDM.html" title="Implementation of the attentional Drift Diffusion Model (aDDM).">aDDM</a> models, created by iterating through the entire parameter grid-space.</li>
<li><code>posteriors</code>: Mapping from individual <a class="el" href="classaDDM.html" title="Implementation of the attentional Drift Diffusion Model (aDDM).">aDDM</a> models to their NLL or marginalized posteriors, depending on input conditions. If the marginal posteriors are to be computed, these calculations are performed at the end of computations.</li>
<li><code>allTrialLikelihoods</code>: Mapping from individual <a class="el" href="classaDDM.html" title="Implementation of the attentional Drift Diffusion Model (aDDM).">aDDM</a> models to their computed <code><a class="el" href="classProbabilityData.html" title="Information pertaining to the computation of likelihoods for a dataset of trials (either DDM or aDDM)...">ProbabilityData</a></code> objects. For reference, this object contains information regarding the computed probabilities for a vector of <code><a class="el" href="classaDDMTrial.html" title="Implementation of a single aDDMTrial object.">aDDMTrial</a></code> objects. It is comprised of the sum of Negative Log Likelihoods, sum of likelihoods, and a list of all likelihoods for each trial.</li>
<li><code>optimal</code>: The most optimal model to fit the given trials.</li>
</ul>
<p>When redesigning this segment of code, the minimum requirement is that some <code><a class="el" href="classaDDM.html" title="Implementation of the attentional Drift Diffusion Model (aDDM).">aDDM</a></code> object is selected as the <b>optimal</b> model. All other computational features can be determined by the user. The decision to compute the marginal posteriors or include code to add to the mappings can also be determined by the user if they inted on using that feature. The code should still compile and run if the <code>posteriors</code> and <code>allTrialLikelihoods</code> maps are left empty.</p>
<h2><a class="anchor" id="autotoc_md11"></a>
Adding Parameters and Alternative Likelihood Calculators</h2>
<p>Some users may want to fit models that have different parameters than those built into the standard model. Steps to use this toolbox with these modifications are described below. An example using a custom toolbox design is described in <a href="sample/custom.cpp">custom.cpp</a> as well. <br  />
</p>
<p><b>Adding New Parameters</b>: The <code><a class="el" href="classaDDM.html" title="Implementation of the attentional Drift Diffusion Model (aDDM).">aDDM</a></code> class has a built-in field <code>optionalParameters</code> that allows users to easily add different parameters to a model. This field is a mapping from strings to floats, so named parameters can be mapped to their specific values. See example below:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;addm/cpp_toolbox.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="addm__mle_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a>() {</div>
<div class="line">    <a class="code hl_class" href="classaDDM.html">aDDM</a> addm = <a class="code hl_class" href="classaDDM.html">aDDM</a>(0.001, 0.02, 0.3);</div>
<div class="line">    addm.addParameter(<span class="stringliteral">&quot;W&quot;</span>, 5);</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;W = &quot;</span> &lt;&lt; addm[<span class="stringliteral">&quot;W&quot;</span>] &lt;&lt; std::endl; </div>
<div class="line">}</div>
</div><!-- fragment --><p> Output: </p><div class="fragment"><div class="line">W = 5</div>
</div><!-- fragment --><p><b>Alternative Likelihood Calculators</b>: The <code><a class="el" href="classaDDM.html" title="Implementation of the attentional Drift Diffusion Model (aDDM).">aDDM</a></code> class also contains a starter method, <code>getLikelihoodAlternative</code>, for users who want to define their own likelihood computations using custom variables. A very simple example is provided in the function now, simply returning <code>1 / this-&gt;optionalParams["W"]</code>. This function should be updated depending on the user's chosen parameters and needs for the calculations. A good starting point could be copying the existing code in <code>getTrialLikelihood</code> to <code>getLikelihoodAlternative</code> and modifying it to their needs. Or, for users who know their own likelihood function will be similar to the existing <code>getTrialLikelihood</code> function, it may be more worth it to just modify that code instead. An example of a call to <code>getLikelihoodAlternative</code> is described below and in <code><a class="el" href="custom_8cpp.html">sample/custom.cpp</a></code>:</p>
<p><code><a class="el" href="alternative_8cpp.html">alternative.cpp</a></code>: </p><div class="fragment"><div class="line"><span class="keywordtype">double</span> <a class="code hl_function" href="classaDDM.html#a8549682389e2f8119669056c58428362">aDDM::getLikelihoodAlternative</a>(<a class="code hl_class" href="classaDDMTrial.html">aDDMTrial</a> trial, <span class="keywordtype">int</span> timeStep, <span class="keywordtype">float</span> approxStateStep) {</div>
<div class="line">    <span class="comment">// EXAMPLE CODE! </span></div>
<div class="line">    <span class="keywordflow">try</span> {</div>
<div class="line">        <span class="keywordflow">return</span> 1 / this-&gt;<a class="code hl_variable" href="classaDDM.html#a9197abe5f4e99d97cbc6c77cc28f3406">optionalParams</a>[<span class="stringliteral">&quot;W&quot;</span>];</div>
<div class="line">    } <span class="keywordflow">catch</span> (exception e) {</div>
<div class="line">        <span class="keywordflow">return</span> 1; </div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="aclassaDDMTrial_html"><div class="ttname"><a href="classaDDMTrial.html">aDDMTrial</a></div><div class="ttdoc">Implementation of a single aDDMTrial object.</div><div class="ttdef"><b>Definition</b> addm.h:55</div></div>
<div class="ttc" id="aclassaDDM_html_a8549682389e2f8119669056c58428362"><div class="ttname"><a href="classaDDM.html#a8549682389e2f8119669056c58428362">aDDM::getLikelihoodAlternative</a></div><div class="ttdeci">double getLikelihoodAlternative(aDDMTrial trial, int timeStep=10, float approxStateStep=0.1)</div><div class="ttdoc">Alternative Likelihood computation function for users who want a custom model.</div><div class="ttdef"><b>Definition</b> alternative.cpp:5</div></div>
<div class="ttc" id="aclassaDDM_html_a9197abe5f4e99d97cbc6c77cc28f3406"><div class="ttname"><a href="classaDDM.html#a9197abe5f4e99d97cbc6c77cc28f3406">aDDM::optionalParams</a></div><div class="ttdeci">map&lt; string, float &gt; optionalParams</div><div class="ttdef"><b>Definition</b> addm.h:134</div></div>
</div><!-- fragment --><p> Function call: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;addm/cpp_toolbox.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="addm__mle_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a>() {</div>
<div class="line">    <a class="code hl_class" href="classaDDM.html">aDDM</a> addm = <a class="code hl_class" href="classaDDM.html">aDDM</a>(0.001, 0.02, 0.3);</div>
<div class="line">    addm.addParameter(<span class="stringliteral">&quot;W&quot;</span>, 5);</div>
<div class="line">    <span class="keywordtype">double</span> likelihood = addm.getLikelihoodAlternative(<a class="code hl_class" href="classaDDMTrial.html">aDDMTrial</a>()); </div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Likelihood = &quot;</span> &lt;&lt; likelihood &lt;&lt; std::endl;     </div>
<div class="line">}</div>
</div><!-- fragment --><p> Output: </p><div class="fragment"><div class="line">Likelihood = 0.2</div>
</div><!-- fragment --><p><b>Custom Model Fitting</b>: These two features can be combined to fit models using any number of parameters and a custom likelihood calculator. To do so, follow the below steps and example or see <code><a class="el" href="custom_8cpp.html">sample/custom.cpp</a></code>:</p>
<ol type="1">
<li>Fill in <code>getLikelihoodAlternative</code> in <code><a class="el" href="alternative_8cpp.html">alternative.cpp</a></code>. It may be useful to start by copying <code>getTrialLikelihood</code> and modifying it as needed. <div class="fragment"><div class="line"><span class="keywordtype">double</span> <a class="code hl_function" href="classaDDM.html#a8549682389e2f8119669056c58428362">aDDM::getLikelihoodAlternative</a>(<a class="code hl_class" href="classaDDMTrial.html">aDDMTrial</a> trial, <span class="keywordtype">int</span> timeStep, <span class="keywordtype">float</span> approxStateStep) {</div>
<div class="line">    <span class="keywordflow">return</span> (this-&gt;<a class="code hl_variable" href="classaDDM.html#a9197abe5f4e99d97cbc6c77cc28f3406">optionalParams</a>[<span class="stringliteral">&quot;A&quot;</span>] + this-&gt;<a class="code hl_variable" href="classaDDM.html#a9197abe5f4e99d97cbc6c77cc28f3406">optionalParams</a>[<span class="stringliteral">&quot;B&quot;</span>] + this-&gt;<a class="code hl_variable" href="classaDDM.html#a9197abe5f4e99d97cbc6c77cc28f3406">optionalParams</a>[<span class="stringliteral">&quot;C&quot;</span>]) / 10;</div>
<div class="line">}</div>
</div><!-- fragment --></li>
<li>Define a range for custom parameters. This involves defining a mapping from different parameters (in their string form) to a vector of numbers of potential values. For example, <div class="fragment"><div class="line">std::map&lt;string, vector&lt;float&gt;&gt; rangeOptional = {</div>
<div class="line">    {<span class="stringliteral">&quot;A&quot;</span>, {0.1, 0.2, 0.3, 0.4}}, </div>
<div class="line">    {<span class="stringliteral">&quot;B&quot;</span>, {0.5, 0.6, 0.7}}, </div>
<div class="line">    {<span class="stringliteral">&quot;C&quot;</span>, {0.8, 0.9}}</div>
<div class="line">};</div>
</div><!-- fragment --></li>
<li>Load trials as usual and call <code><a class="el" href="classaDDM.html#acc9951f76f33388905921ef38a76c89b" title="Complete a grid-search based Maximum Likelihood Estimation of all possible parameter combinations (d,...">aDDM::fitModelMLE</a></code> to perform model fitting and retrieve the most optimal model. Be sure to toggle the last two arguments of the function as necessary, which specify if <code>getLikelihoodAlternative</code> should be used and if there exist potential values for custom parameters to test all combinations of. (These parameters should be <b>true</b> and <b>rangeOptional</b> if the custom parameter space is non-empty). <div class="fragment"><div class="line">std::vector&lt;aDDMTrial&gt; trials = <a class="code hl_function" href="classaDDMTrial.html#a370280f496885eeb71c2530d77f5d889">aDDMTrial::loadTrialsFromCSV</a>(<a class="code hl_variable" href="addm__mle_8cpp.html#a82b30bdf03d8d4f4499963ac4878b6ba">SIMS</a>);</div>
<div class="line"><a class="code hl_struct" href="structMLEinfo.html">MLEinfo</a> info = <a class="code hl_function" href="classaDDM.html#acc9951f76f33388905921ef38a76c89b">aDDM::fitModelMLE</a>(</div>
<div class="line">    trials, {0.005}, {0.07}, {0.5}, {0}, <span class="stringliteral">&quot;thread&quot;</span>, <span class="keyword">false</span>, 1, 0, 10, 0.1, {0}, {0}, <span class="keyword">true</span>, rangeOptional);</div>
<div class="ttc" id="aaddm__mle_8cpp_html_a82b30bdf03d8d4f4499963ac4878b6ba"><div class="ttname"><a href="addm__mle_8cpp.html#a82b30bdf03d8d4f4499963ac4878b6ba">SIMS</a></div><div class="ttdeci">const std::string SIMS</div><div class="ttdef"><b>Definition</b> addm_mle.cpp:7</div></div>
<div class="ttc" id="aclassaDDMTrial_html_a370280f496885eeb71c2530d77f5d889"><div class="ttname"><a href="classaDDMTrial.html#a370280f496885eeb71c2530d77f5d889">aDDMTrial::loadTrialsFromCSV</a></div><div class="ttdeci">static vector&lt; aDDMTrial &gt; loadTrialsFromCSV(string filename)</div><div class="ttdoc">Load a dataset of aDDMTrials into program memory.</div><div class="ttdef"><b>Definition</b> addm.cpp:614</div></div>
</div><!-- fragment --></li>
</ol>
<p>Note that C++ requires positional arguments, so there is no way to get around filling in all arguments up to the ones you intend to modify from the default. Some users may prefer to use Python instead of C++ to allow for keyword arguments, which may be filled in and changed from the default at the user's will. See the Python Bindings section below for more details on getting started with Python Bindings.</p>
<p>*See <a href="https://github.com/aDDM-Toolbox/ADDM.cpp/blob/main/include/addm.h"><code>addm.h</code></a> for complete documentation on model fitting arguments.*</p>
<h1><a class="anchor" id="autotoc_md12"></a>
Python Bindings</h1>
<p>Python bindings are also provided for users who prefer to work with a Python codebase over C++. The provided bindings are located in <a href="lib/bindings.cpp">lib/bindings.cpp</a>. Note that <a href="https://github.com/pybind/pybind11">pybind11</a> and Python version 3.10 (at a minimum) are <b>strict</b> prerequisites for installation and usage of the Python code. These are installed in the Docker image. For local installation on a Linux OS they can be installed with</p>
<div class="fragment"><div class="line">$ apt-get install python3.10</div>
<div class="line">$ pip3 install pybind11</div>
</div><!-- fragment --><p>Once <code>pybind11</code> and Python 3.10 are installed, the module can be built with:</p>
<div class="fragment"><div class="line">$ make pybind</div>
</div><!-- fragment --><p>This will create a shared library object in the repository's root directory containing the <code>addm_toolbox_cpp</code> module. Although function calls remain largely analogous with the original C++ code, an example is described below that can be used to ensure the code is working properly:</p>
<p><code>main.py</code>:</p>
<div class="fragment"><div class="line"><span class="keyword">import</span> addm_toolbox_cpp</div>
<div class="line"> </div>
<div class="line">ddm = addm_toolbox_cpp.DDM(0.005, 0.07)</div>
<div class="line">print(f<span class="stringliteral">&quot;d = {ddm.d}&quot;</span>)</div>
<div class="line">print(f<span class="stringliteral">&quot;sigma = {ddm.sigma}&quot;</span>)</div>
<div class="line"> </div>
<div class="line">trial = ddm.simulateTrial(3, 7, 10, 540)</div>
<div class="line">print(f<span class="stringliteral">&quot;RT = {trial.RT}&quot;</span>)</div>
<div class="line">print(f<span class="stringliteral">&quot;choice = {trial.choice}&quot;</span>)</div>
</div><!-- fragment --><p>To run the code:</p>
<div class="fragment"><div class="line">$ python3 main.py</div>
</div><!-- fragment --><p>Expected output:</p>
<div class="fragment"><div class="line">d = 0.005</div>
<div class="line">sigma = 0.07</div>
<div class="line">RT = 850</div>
<div class="line">choice = 1</div>
</div><!-- fragment --><p>Model fitting for the <a class="el" href="classaDDM.html" title="Implementation of the attentional Drift Diffusion Model (aDDM).">aDDM</a> is largely analgous to the original C++ code. We provide a Python model of <a href="sample/tutorial.cpp">sample/tutorial.cpp</a> below:</p>
<p><code>tutorial.py</code> </p><div class="fragment"><div class="line"><span class="keyword">import</span> addm_toolbox_cpp</div>
<div class="line"> </div>
<div class="line">data = addm_toolbox_cpp.loadDataFromCSV(</div>
<div class="line">    <span class="stringliteral">&quot;data/expdata.csv&quot;</span>, <span class="stringliteral">&quot;data/fixations.csv&quot;</span>)</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">for</span> subject_id, trials <span class="keywordflow">in</span> data.items(): </div>
<div class="line">    info = addm_toolbox_cpp.aDDM.fitModelMLE(</div>
<div class="line">        trials, </div>
<div class="line">        rangeD=[0.001, 0.002, 0.003], </div>
<div class="line">        rangeSigma=[0.0875, 0.09, 0.0925],</div>
<div class="line">        rangeTheta=[0.1, 0.3, 0.5], </div>
<div class="line">        computeMethod=<span class="stringliteral">&quot;thread&quot;</span></div>
<div class="line">    )</div>
<div class="line"> </div>
<div class="line">    print(f<span class="stringliteral">&quot;{subject_id}: &quot;</span> + </div>
<div class="line">          f<span class="stringliteral">&quot;d: {round(info.optimal.d, 4)} &quot;</span> + </div>
<div class="line">          f<span class="stringliteral">&quot;sigma: {round(info.optimal.sigma, 4)} &quot;</span> +</div>
<div class="line">          f<span class="stringliteral">&quot;theta: {round(info.optimal.theta, 4)}&quot;</span>)</div>
</div><!-- fragment --><p>To run the code:</p>
<div class="fragment"><div class="line">$ python3 tutorial.py</div>
</div><!-- fragment --><p>Expected output:</p>
<div class="fragment"><div class="line">0: d: 0.001 sigma: 0.0925 theta: 0.1</div>
<div class="line">1: d: 0.001 sigma: 0.09 theta: 0.1</div>
<div class="line">2: d: 0.001 sigma: 0.0875 theta: 0.1</div>
<div class="line">3: d: 0.001 sigma: 0.09 theta: 0.1</div>
<div class="line">â‹®</div>
</div><!-- fragment --><p>Note that when executing any Python files using the <code>addm_toolbox_cpp</code> module, the compiled shared libary (<code>.so</code>) should be either:</p>
<ul>
<li>Placed in the same directory as the Python executable.</li>
<li>Placed in some directory in the <code>PYTHONPATH</code> environmental variable. (i.e. <code>usr/lib/python3.10</code> for Linux).</li>
</ul>
<h2><a class="anchor" id="autotoc_md13"></a>
Optional: Python Syntax Highlighting</h2>
<p>For users working in a user interface, such as Visual Studio Code, a Python stub is provided to facilitate features including syntax highlighting, type-hinting, and auto-complete. Although the <code>addm_toolbox_cpp.pyi</code> stub is built-in, the file can be dynamically generated using the <a href="https://mypy.readthedocs.io/en/stable/stubgen.html">mypy stubgen</a> tool. The <code>mypy</code> module can be installed using:</p>
<div class="fragment"><div class="line">$ pip install mypy</div>
</div><!-- fragment --><p>For users who plan to modify the library for their own use and want the provided features, the stub file can be built as follows:</p>
<div class="fragment"><div class="line">$ stubgen -m addm_toolbox_cpp -o .</div>
</div><!-- fragment --><p> <em>Note that the <code>pybind11</code> shared library file should be built before running <code>stubgen</code>.</em></p>
<h1><a class="anchor" id="autotoc_md14"></a>
Data Analysis Scripts</h1>
<p>A set of data analysis and visualization tools are provided in the <a href="analysis/">analysis</a> directory. Current provided scripts include:</p>
<ul>
<li><a class="el" href="classDDM.html" title="Implementation of the Drift Diffusion Model (DDM).">DDM</a> Heatmaps for MLE.</li>
<li><a class="el" href="classaDDM.html" title="Implementation of the attentional Drift Diffusion Model (aDDM).">aDDM</a> Heatmap for MLE.</li>
<li>Posterior Pair Plots.</li>
<li>Time vs RDV for individual trial.</li>
<li>Value Differences against Response Time Frequencies.</li>
</ul>
<p>See the individual file documentation for usage instructions.</p>
<h1><a class="anchor" id="autotoc_md15"></a>
Authors</h1>
<ul>
<li>Jake Goldman - <a href="#" onclick="location.href='mai'+'lto:'+'jgo'+'ld'+'man'+'@c'+'alt'+'ec'+'h.e'+'du'; return false;">jgold<span class="obfuscator">.nosp@m.</span>man@<span class="obfuscator">.nosp@m.</span>calte<span class="obfuscator">.nosp@m.</span>ch.e<span class="obfuscator">.nosp@m.</span>du</a>, <a href="https://github.com/jakegoldm">jakegoldm</a></li>
<li>Zeynep Enkavi - <a href="#" onclick="location.href='mai'+'lto:'+'zen'+'ka'+'vi@'+'ca'+'lte'+'ch'+'.ed'+'u'; return false;">zenka<span class="obfuscator">.nosp@m.</span>vi@c<span class="obfuscator">.nosp@m.</span>altec<span class="obfuscator">.nosp@m.</span>h.ed<span class="obfuscator">.nosp@m.</span>u</a>, <a href="https://github.com/zenkavi">zenkavi</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md16"></a>
Acknowledgements</h1>
<p>This toolbox was developed as part of a research project in the <a href="http://www.rnl.caltech.edu/">Rangel Neuroeconomics Lab</a> at the California Institute of Technology. Special thanks to Antonio Rangel and Zeynep Enkavi for your help with this project. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
